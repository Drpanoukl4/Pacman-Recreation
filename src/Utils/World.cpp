#include "World.h"

void World::Initialize () 
{
    sWorld.resize( FieldWidth * FieldHeight );
    
    sWorld =
    {
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,
        1,4,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,4,1,
        1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,0,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,1,
        1,0,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,1,
        1,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,1,
        1,1,1,1,1,1,0,1,1,1,1,1,2,1,1,2,1,1,1,1,1,0,1,1,1,1,1,1,
        2,2,2,2,2,1,0,1,1,1,1,1,2,1,1,2,1,1,1,1,1,0,1,2,2,2,2,2,
        2,2,2,2,2,1,0,1,1,2,2,2,2,2,2,2,2,2,2,1,1,0,1,2,2,2,2,2,
        2,2,2,2,2,1,0,1,1,2,1,1,1,6,6,1,1,1,2,1,1,0,1,2,2,2,2,2,
        1,1,1,1,1,1,0,1,1,2,1,5,5,6,6,5,5,1,2,1,1,0,1,1,1,1,1,1,
        0,0,0,0,0,0,0,0,0,2,1,2,2,2,2,2,2,1,2,0,0,0,0,0,0,0,0,0,
        1,1,1,1,1,1,0,1,1,2,1,5,5,5,5,5,5,1,2,1,1,0,1,1,1,1,1,1,
        2,2,2,2,2,1,0,1,1,2,1,1,1,1,1,1,1,1,2,1,1,0,1,2,2,2,2,2,
        2,2,2,2,2,1,0,1,1,2,2,2,2,2,2,2,2,2,2,1,1,0,1,2,2,2,2,2,
        2,2,2,2,2,1,0,1,1,2,1,1,1,1,1,1,1,1,2,1,1,0,1,2,2,2,2,2,
        1,1,1,1,1,1,0,1,1,2,1,1,1,1,1,1,1,1,2,1,1,0,1,1,1,1,1,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,
        1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,
        1,4,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,4,1,
        1,1,1,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,0,1,1,1,
        1,1,1,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,0,1,1,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,
        1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,
        1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
        1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1

    };

    for(int x = 0; x < FieldWidth; x ++) 
    {

        for(int y = 0; y < FieldHeight; y ++) 
        {

            if(GetTile(x, y) == 0 || GetTile(x, y) == 4) 
            {

                Pellets_n ++;

            }

        }

    }

}


int World::GetTile (int x, int y) 
{

    if(x >= 0 && x < FieldWidth && y >= 0 && y < FieldHeight ) 
    {

        return( sWorld[ (y * FieldWidth) + x ] );

    }else
    { 
        return 10;
    }

}

void World::SetTile (int x, int y, int tile) 
{

    if(x >= 0 && x < FieldWidth && y >= 0 && y < FieldHeight ) 
    {

        sWorld[ (y * FieldWidth) + x ] = tile;

    }

}

void World::Eat (int x, int y) 
{

    if(GetTile( x, y ) == 0 )
    {

        SetTile (x, y, 2);
        Pellets_n --;
        Score += 10;
    }

    if(GetTile(x, y) == 4) 
    {

        SetTile (x, y, 2);
        Pellets_n --;
        Score += 50;
        Mode = 1;

    }
}